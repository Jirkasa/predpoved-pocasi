(()=>{"use strict";const t=function(){function t(){this.handlers=new Map,this.count=0}return t.prototype.subscribe=function(t){return this.handlers.set(this.count,t),this.count++},t.prototype.unsubscribe=function(t){this.handlers.delete(t)},t.prototype.fire=function(t){this.handlers.forEach((function(e){e(t)}))},t}();const e=function(){function e(){this.onLoadingStartedEventSource=new t,this.onDataLoadedEventSource=new t,this.onLoadingErrorEventSource=new t,this.abortController=null}return e.prototype.loadData=function(){return t=this,e=void 0,r=function(){var t,e;return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(n){switch(n.label){case 0:this.abortController?this.abortController.abort():this.onLoadingStartedEventSource.fire(void 0),this.abortController=new AbortController,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getData(this.abortController.signal)];case 2:return t=n.sent(),this.onDataLoadedEventSource.fire(t),[3,4];case 3:return(e=n.sent())instanceof Error&&"AbortError"===e.name?[2]:(console.error(e),this.onLoadingErrorEventSource.fire(void 0),[3,4]);case 4:return this.abortController=null,[2]}}))},new((n=void 0)||(n=Promise))((function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}s((r=r.apply(t,e||[])).next())}));var t,e,n,r},e.prototype.addOnLoadingStartedListener=function(t){this.onLoadingStartedEventSource.subscribe(t)},e.prototype.addOnDataLoadedListener=function(t){this.onDataLoadedEventSource.subscribe(t)},e.prototype.addOnLoadingErrorListener=function(t){this.onLoadingErrorEventSource.subscribe(t)},e}();var n,r=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const a=function(t){function e(e,n,r,a){var o=t.call(this)||this;return o.weatherDataLoader=e,o.latitude=n,o.longitude=r,o.language=a,o}return r(e,t),e.prototype.setCoordinates=function(t,e){this.latitude=t,this.longitude=e},e.prototype.setLanguage=function(t){this.language=t},e.prototype.getData=function(t){return e=this,n=void 0,a=function(){return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(e){switch(e.label){case 0:return[4,this.weatherDataLoader.loadCurrentWeatherData(this.latitude,this.longitude,this.language,t)];case 1:return[2,e.sent()]}}))},new((r=void 0)||(r=Promise))((function(t,o){function i(t){try{s(a.next(t))}catch(t){o(t)}}function u(t){try{s(a.throw(t))}catch(t){o(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,u)}s((a=a.apply(e,n||[])).next())}));var e,n,r,a},e}(e);var o=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const i=function(t){function e(e,n,r,a){var o=t.call(this)||this;return o.weatherDataLoader=e,o.latitude=n,o.longitude=r,o.language=a,o}return o(e,t),e.prototype.setCoordinates=function(t,e){this.latitude=t,this.longitude=e},e.prototype.setLanguage=function(t){this.language=t},e.prototype.getData=function(t){return e=this,n=void 0,a=function(){return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(e){switch(e.label){case 0:return[4,this.weatherDataLoader.loadForecastWeatherData(this.latitude,this.longitude,this.language,t)];case 1:return[2,e.sent()]}}))},new((r=void 0)||(r=Promise))((function(t,o){function i(t){try{s(a.next(t))}catch(t){o(t)}}function u(t){try{s(a.throw(t))}catch(t){o(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,u)}s((a=a.apply(e,n||[])).next())}));var e,n,r,a},e}(e);var u=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const s=function(t){function e(e){var n=t.call(this)||this;return n.latitude=0,n.longitude=0,n.locationSearch=e,n}return u(e,t),e.prototype.setCoordinates=function(t,e){this.latitude=t,this.longitude=e},e.prototype.getData=function(t){return e=this,n=void 0,a=function(){return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(e){switch(e.label){case 0:return[4,this.locationSearch.searchByCoordinates(this.latitude,this.longitude,t)];case 1:return[2,e.sent()]}}))},new((r=void 0)||(r=Promise))((function(t,o){function i(t){try{s(a.next(t))}catch(t){o(t)}}function u(t){try{s(a.throw(t))}catch(t){o(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,u)}s((a=a.apply(e,n||[])).next())}));var e,n,r,a},e}(e);var c=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const l=function(t){function e(e){var n=t.call(this)||this;return n.searchText="",n.locationSearch=e,n}return c(e,t),e.prototype.setSearchText=function(t){this.searchText=t},e.prototype.getData=function(t){return e=this,n=void 0,a=function(){return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(e){switch(e.label){case 0:return[4,this.locationSearch.search(this.searchText,t)];case 1:return[2,e.sent()]}}))},new((r=void 0)||(r=Promise))((function(t,o){function i(t){try{s(a.next(t))}catch(t){o(t)}}function u(t){try{s(a.throw(t))}catch(t){o(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,u)}s((a=a.apply(e,n||[])).next())}));var e,n,r,a},e}(e);var h=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}s((r=r.apply(t,e||[])).next())}))},d=function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};const p=function(){function e(e,n,r,o,u){var c=this;this.onLocationChangeEventSource=new t,this.currentLocation=null,this.currentWeatherLoadingManager=new a(e,r,o,u),this.forecastWeatherLoadingManager=new i(e,r,o,u),this.locationSearchManager=new l(n),this.weatherDataLoader=e;var h=new s(n);h.addOnDataLoadedListener((function(t){return c.onLocationSearchByCoordinatesLoaded(t)})),h.setCoordinates(r,o),h.loadData()}return e.prototype.getCurrentLocationName=function(t){if(void 0===t&&(t=null),!this.currentLocation)return"";if(t){var e=this.currentLocation.localNames.get(t);if(e)return e}return this.currentLocation.name},e.prototype.getCurrentLocationCoordinates=function(){return this.currentLocation?[this.currentLocation.latitude,this.currentLocation.longitude]:null},e.prototype.setLocation=function(t){t!==this.currentLocation&&(this.currentWeatherLoadingManager.setCoordinates(t.latitude,t.longitude),this.forecastWeatherLoadingManager.setCoordinates(t.latitude,t.longitude),this.currentLocation=t,this.onLocationChangeEventSource.fire(void 0))},e.prototype.setLanguage=function(t){this.currentWeatherLoadingManager.setLanguage(t),this.forecastWeatherLoadingManager.setLanguage(t)},e.prototype.loadCurrentWeather=function(){return h(this,void 0,void 0,(function(){return d(this,(function(t){return this.currentWeatherLoadingManager.loadData(),[2]}))}))},e.prototype.loadForecastWeather=function(){return h(this,void 0,void 0,(function(){return d(this,(function(t){return this.forecastWeatherLoadingManager.loadData(),[2]}))}))},e.prototype.searchForLocation=function(t){return h(this,void 0,void 0,(function(){return d(this,(function(e){return this.locationSearchManager.setSearchText(t),this.locationSearchManager.loadData(),[2]}))}))},e.prototype.getIconImageURL=function(t,e){return void 0===e&&(e=!1),this.weatherDataLoader.getIconURLByIconIdentifier(t,e)},e.prototype.addOnCurrentWeatherLoadingStartedListener=function(t){this.currentWeatherLoadingManager.addOnLoadingStartedListener(t)},e.prototype.addOnCurrentWeatherLoadedListener=function(t){this.currentWeatherLoadingManager.addOnDataLoadedListener(t)},e.prototype.addOnCurrentWeatherLoadingErrorListener=function(t){this.currentWeatherLoadingManager.addOnLoadingErrorListener(t)},e.prototype.addOnForecastWeatherLoadingStartedListener=function(t){this.forecastWeatherLoadingManager.addOnLoadingStartedListener(t)},e.prototype.addOnForecastWeatherLoadedListener=function(t){this.forecastWeatherLoadingManager.addOnDataLoadedListener(t)},e.prototype.addOnForecastWeatherLoadingErrorListener=function(t){this.forecastWeatherLoadingManager.addOnLoadingErrorListener(t)},e.prototype.addOnLocationSearchLoadingStartedListener=function(t){this.locationSearchManager.addOnLoadingStartedListener(t)},e.prototype.addOnLocationSearchLoadedListener=function(t){this.locationSearchManager.addOnDataLoadedListener(t)},e.prototype.addOnLocationSearchLoadingErrorListener=function(t){this.locationSearchManager.addOnLoadingErrorListener(t)},e.prototype.addOnLocationChangeListener=function(t){this.onLocationChangeEventSource.subscribe(t)},e.prototype.onLocationSearchByCoordinatesLoaded=function(t){this.currentLocation||(this.currentLocation=t,t&&this.onLocationChangeEventSource.fire(void 0))},e}();var g;!function(t){t[t.DAY=0]="DAY",t[t.NIGHT=1]="NIGHT"}(g||(g={}));const f=g;var y=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}s((r=r.apply(t,e||[])).next())}))},L=function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};const E=function(){function t(t){this.appId=t}return t.prototype.loadCurrentWeatherData=function(e,n,r,a){return y(this,void 0,void 0,(function(){var o,i,u,s;return L(this,(function(c){switch(c.label){case 0:return o=new URLSearchParams({appid:this.appId,lat:e.toString(),lon:n.toString(),units:t.UNITS,lang:r}),[4,fetch("".concat(t.CURRENT_WEATHER_ENDPOINT,"?").concat(o.toString()),{signal:a})];case 1:if(!(i=c.sent()).ok)throw new Error("Current weather data could not be loaded.");return[4,i.json()];case 2:if(u=c.sent(),null===(s=this.getCurrentWeatherDataFromJson(u)))throw new Error("Current weather data could not be loaded.");return[2,s]}}))}))},t.prototype.loadForecastWeatherData=function(e,n,r,a){return y(this,void 0,void 0,(function(){var o,i,u,s;return L(this,(function(c){switch(c.label){case 0:return o=new URLSearchParams({appid:this.appId,lat:e.toString(),lon:n.toString(),units:t.UNITS,lang:r}),[4,fetch("".concat(t.FORECAST_WEATHER_ENDPOINT,"?").concat(o.toString()),{signal:a})];case 1:if(!(i=c.sent()).ok)throw new Error("Forecast weather data could not be loaded.");return[4,i.json()];case 2:if(u=c.sent(),null===(s=this.getForecastWeatherDataFromJson(u)))throw new Error("Forecast weather data could not be loaded.");return[2,s]}}))}))},t.prototype.getIconURLByIconIdentifier=function(e,n){void 0===n&&(n=!1);var r=n?"4x":"2x";return"".concat(t.ICONS_URL).concat(e,"@").concat(r,".png")},t.prototype.getCurrentWeatherDataFromJson=function(t){if("object"!=typeof t)return null;var e=t.main;if("object"!=typeof e)return null;if("number"!=typeof e.temp)return null;if("number"!=typeof e.feels_like)return null;if("number"!=typeof e.humidity)return null;var n=t.weather;if(!(n instanceof Array))return null;var r=n[0];if("object"!=typeof r)return null;if("string"!=typeof r.description)return null;if("string"!=typeof r.icon)return null;var a=t.wind;return"object"!=typeof a||"number"!=typeof a.speed?null:{temperature:e.temp,feelsLike:e.feels_like,description:r.description,iconIdentifier:r.icon,humidity:e.humidity,windSpeed:a.speed}},t.prototype.getForecastWeatherDataFromJson=function(t){if("object"!=typeof t)return null;var e=t.list;if(!(e instanceof Array))return null;for(var n=[],r=0,a=e;r<a.length;r++){var o=a[r];if("number"!=typeof o.dt)return null;var i=o.main;if("object"!=typeof i)return null;if("number"!=typeof i.temp)return null;if("number"!=typeof i.feels_like)return null;if("number"!=typeof i.humidity)return null;var u=o.weather;if(!(u instanceof Array))return null;var s=u[0];if("object"!=typeof s)return null;if("string"!=typeof s.icon)return null;if("number"!=typeof o.pop)return null;var c=o.wind;if("object"!=typeof c)return null;if("number"!=typeof c.speed)return null;var l=o.sys;if("object"!=typeof l)return null;var h=null;switch(l.pod){case"d":h=f.DAY;break;case"n":h=f.NIGHT}if(null===h)return null;n.push({time:o.dt,temperature:i.temp,feelsLike:i.feels_like,iconIdentifier:s.icon,probabilityOfPrecipitation:o.pop,humidity:i.humidity,windSpeed:c.speed,partOfDay:h})}return n},t.CURRENT_WEATHER_ENDPOINT="https://api.openweathermap.org/data/2.5/weather",t.FORECAST_WEATHER_ENDPOINT="https://api.openweathermap.org/data/2.5/forecast",t.ICONS_URL="https://openweathermap.org/img/wn/",t.UNITS="metric",t}();var v=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}s((r=r.apply(t,e||[])).next())}))},I=function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};const m=function(){function t(t){this.appId=t}return t.prototype.search=function(e,n){return v(this,void 0,void 0,(function(){var r,a,o,i;return I(this,(function(u){switch(u.label){case 0:return r=new URLSearchParams({appId:this.appId,limit:t.LOCATIONS_LIMIT.toString(),q:e}),[4,fetch("".concat(t.SEARCH_ENDPOINT,"?").concat(r.toString()),{signal:n})];case 1:if(!(a=u.sent()).ok)throw new Error("Locations could not be loaded.");return[4,a.json()];case 2:if(o=u.sent(),null===(i=this.getLocationsDataFromJson(o)))throw new Error("Locations could not be loaded.");return[2,i]}}))}))},t.prototype.searchByCoordinates=function(e,n,r){return v(this,void 0,void 0,(function(){var a,o,i,u;return I(this,(function(s){switch(s.label){case 0:return a=new URLSearchParams({appId:this.appId,lat:e.toString(),lon:n.toString(),limit:"1"}),[4,fetch("".concat(t.SEARCH_BY_COORDINATES_ENDPOINT,"?").concat(a.toString()),{signal:r})];case 1:if(!(o=s.sent()).ok)throw new Error("Location could not be loaded.");return[4,o.json()];case 2:if(i=s.sent(),null===(u=this.getLocationsDataFromJson(i)))throw new Error("Locations could not be loaded.");return[2,u.length>0?u[0]:null]}}))}))},t.prototype.getLocationsDataFromJson=function(t){if(!(t instanceof Array))return null;for(var e=[],n=0,r=t;n<r.length;n++){var a=r[n];if("object"!=typeof a)return null;if("string"!=typeof a.name)return null;if("number"!=typeof a.lat)return null;if("number"!=typeof a.lon)return null;var o=a.local_names,i=new Map;if("object"==typeof o)for(var u=0,s=Object.entries(o);u<s.length;u++){var c=s[u],l=c[0],h=c[1];if("string"!=typeof h)return null;i.set(l,h)}e.push({name:a.name,localNames:i,latitude:a.lat,longitude:a.lon})}return e},t.SEARCH_ENDPOINT="https://api.openweathermap.org/geo/1.0/direct",t.SEARCH_BY_COORDINATES_ENDPOINT="https://api.openweathermap.org/geo/1.0/reverse",t.LOCATIONS_LIMIT=5,t}();var S;!function(t){t[t.CZECH=0]="CZECH",t[t.ENGLISH=1]="ENGLISH",t[t.SLOVAK=2]="SLOVAK",t[t.GERMAN=3]="GERMAN"}(S||(S={}));const C=S;const b=function(){function t(){}return t.prototype.loadLanguage=function(e,n){return r=this,a=void 0,i=function(){var r,a;return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(o){switch(o.label){case 0:switch(e){case C.CZECH:r=t.CZECH_JSON_FILE_PATH;break;case C.ENGLISH:r=t.ENGLISH_JSON_FILE_PATH;break;case C.SLOVAK:r=t.SLOVAK_JSON_FILE_PATH;break;case C.GERMAN:r=t.GERMAN_JSON_FILE_PATH}return[4,fetch(r,{signal:n})];case 1:if(!(a=o.sent()).ok)throw new Error("Language data could not be loaded.");return[4,a.json()];case 2:return[2,o.sent()]}}))},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{s(i.next(t))}catch(t){e(t)}}function u(t){try{s(i.throw(t))}catch(t){e(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o((function(t){t(r)}))).then(n,u)}s((i=i.apply(r,a||[])).next())}));var r,a,o,i},t.CZECH_JSON_FILE_PATH="./static/language/cz.json",t.ENGLISH_JSON_FILE_PATH="./static/language/en.json",t.SLOVAK_JSON_FILE_PATH="./static/language/sk.json",t.GERMAN_JSON_FILE_PATH="./static/language/de.json",t}();var w=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const T=function(t){function e(e,n){var r=t.call(this)||this;return r.languageDataLoader=e,r.language=n,r}return w(e,t),e.prototype.setLanguage=function(t){this.language=t},e.prototype.getData=function(t){return e=this,n=void 0,a=function(){return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(e){switch(e.label){case 0:return[4,this.languageDataLoader.loadLanguage(this.language,t)];case 1:return[2,e.sent()]}}))},new((r=void 0)||(r=Promise))((function(t,o){function i(t){try{s(a.next(t))}catch(t){o(t)}}function u(t){try{s(a.throw(t))}catch(t){o(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,u)}s((a=a.apply(e,n||[])).next())}));var e,n,r,a},e}(e);const _=function(){function e(e){var n=this;this.onLanguageChangeEventSource=new t,this.currentLanguage=C.ENGLISH,this.languageLoadingManager=new T(e,this.currentLanguage),this.languageLoadingManager.addOnDataLoadedListener((function(t){return n.onLanguageDataLoaded(t)}))}return e.prototype.changeLanguage=function(t){return e=this,n=void 0,a=function(){return function(t,e){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}(this,(function(e){return this.currentLanguage=t,this.languageLoadingManager.setLanguage(t),this.languageLoadingManager.loadData(),[2]}))},new((r=void 0)||(r=Promise))((function(t,o){function i(t){try{s(a.next(t))}catch(t){o(t)}}function u(t){try{s(a.throw(t))}catch(t){o(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,u)}s((a=a.apply(e,n||[])).next())}));var e,n,r,a},e.prototype.getCurrentLanguage=function(){return this.currentLanguage},e.prototype.addOnLanguageLoadingStartedListener=function(t){this.languageLoadingManager.addOnLoadingStartedListener(t)},e.prototype.addOnLanguageChangeListener=function(t){this.onLanguageChangeEventSource.subscribe(t)},e.prototype.addOnLanguageLoadingErrorListener=function(t){this.languageLoadingManager.addOnLoadingErrorListener(t)},e.prototype.onLanguageDataLoaded=function(t){this.onLanguageChangeEventSource.fire({language:this.currentLanguage,localizedData:t})},e}(),A=function(){function t(){}return t.getLocale=function(t,e){switch(void 0===e&&(e=!1),t){case C.ENGLISH:return"en";case C.CZECH:return e?"cz":"cs";case C.SLOVAK:return"sk";case C.GERMAN:return"de"}},t}(),O=function(){function t(t,e){this.loadingIcon=t,this.contentContainer=e}return t.prototype.showLoadingIcon=function(){this.loadingIcon.style.removeProperty("display"),this.contentContainer.style.display="none"},t.prototype.showContent=function(){this.loadingIcon.style.display="none",this.contentContainer.style.removeProperty("display")},t}(),D=function(){function t(t,e){var n=this;this.weatherApp=t,this.toggle=new O(e.loadingIcon,e.contentContainer),this.image=e.image,this.temperatureElement=e.temperatureValue,this.weatherDescriptionElement=e.weatherDescription,this.feelsLikeElement=e.feelsLikeValue,this.humidityElement=e.humidityValue,this.windElement=e.windValue,t.addOnCurrentWeatherLoadingStartedListener((function(){return n.onWeatherLoadingStarted()})),t.addOnCurrentWeatherLoadedListener((function(t){return n.onWeatherLoaded(t)}))}return t.prototype.onWeatherLoadingStarted=function(){this.toggle.showLoadingIcon()},t.prototype.onWeatherLoaded=function(t){this.toggle.showContent(),this.image.src=this.weatherApp.getIconImageURL(t.iconIdentifier,!0),this.image.alt=t.description,this.temperatureElement.innerText=Math.round(t.temperature).toString(),this.weatherDescriptionElement.innerText=t.description,this.feelsLikeElement.innerText=Math.round(t.feelsLike).toString(),this.humidityElement.innerText=Math.round(t.humidity).toString(),this.windElement.innerText=t.windSpeed.toString()},t}(),B=function(){function t(){}return t.unixTimeToDate=function(t){return new Date(1e3*t)},t.groupWeatherDataByDay=function(t){var e=this,n=t.reduce((function(t,n){var r=e.unixTimeToDate(n.time);r.setHours(0,0,0,0);var a=r.getTime(),o=t.get(a);return o||(o=[],t.set(a,o)),o.push(n),t}),new Map),r=[];return n.forEach((function(t,e){r.push({date:new Date(e),data:t})})),r},t.getAverageTemperatures=function(t){for(var e=0,n=0,r=0,a=0,o=0,i=t;o<i.length;o++){var u=i[o];u.partOfDay===f.DAY?(e++,n+=u.temperature):(r++,a+=u.temperature)}return{dayTemperature:e>0?n/e:null,nightTemperature:r>0?a/r:null}},t.getPrevailingIconId=function(t,e){for(var n=new Map,r=0,a=t;r<a.length;r++){var o=a[r];if(o.partOfDay===e){var i=n.get(o.iconIdentifier);void 0===i&&(i=0),i++,n.set(o.iconIdentifier,i)}}var u=null,s=0;return n.forEach((function(t,e){t>s&&(u=e,s=t)})),u},t}(),P=function(){function t(){}return t.create=function(t,e){return'\n        <svg>\n            <use xlink:href="'.concat(t,"#").concat(e,'"></use>\n        </svg>\n        ')},t}(),N=function(){function e(n,r,a,o){var i=this;this.onClickEventSource=new t,this.dayWeatherData=n,this.buttonElement=document.createElement("button"),this.buttonElement.classList.add(e.BUTTON_CSS_CLASS),r.appendChild(this.buttonElement),this.dayElement=document.createElement("span"),this.dayElement.classList.add(e.DAY_CSS_CLASS),this.dayElement.innerText=n.date.toLocaleString(o,{weekday:"short"}),this.buttonElement.appendChild(this.dayElement);var u=document.createElement("div");u.classList.add(e.WEATHER_ICON_CSS_CLASS),this.buttonElement.appendChild(u);var s=document.createElement("img"),c=B.getPrevailingIconId(n.data,f.DAY);null===c&&(c=B.getPrevailingIconId(n.data,f.NIGHT)),null!==c&&(s.src=a.getIconImageURL(c)),u.appendChild(s);var l=B.getAverageTemperatures(n.data),h=document.createElement("span");h.classList.add(e.TEMPERATURE_CSS_CLASS),h.innerText=this.createTemperatureString(l.dayTemperature),this.buttonElement.appendChild(h);var d=document.createElement("div");d.classList.add(e.NIGHT_TEMPERATURE_CSS_CLASS),d.innerHTML=P.create("./static/icon-sprite.svg","night"),this.buttonElement.appendChild(d);var p=document.createElement("span");p.innerText=this.createTemperatureString(l.nightTemperature),d.appendChild(p),this.buttonElement.addEventListener("click",(function(){return i.onButtonClick()}))}return e.prototype.getDayWeatherData=function(){return this.dayWeatherData},e.prototype.setAsActive=function(){this.buttonElement.classList.add(e.BUTTON_CSS_ACTIVE_MODIFIER_CLASS)},e.prototype.setAsInactive=function(){this.buttonElement.classList.remove(e.BUTTON_CSS_ACTIVE_MODIFIER_CLASS)},e.prototype.updateDayName=function(t){this.dayElement.innerText=this.dayWeatherData.date.toLocaleString(t,{weekday:"short"})},e.prototype.addOnClickListener=function(t){this.onClickEventSource.subscribe(t)},e.prototype.onButtonClick=function(){this.onClickEventSource.fire(this)},e.prototype.createTemperatureString=function(t){return null!==t?Math.round(t).toString()+"°C":"-"},e.BUTTON_CSS_CLASS="day-button",e.BUTTON_CSS_ACTIVE_MODIFIER_CLASS="day-button--active",e.DAY_CSS_CLASS="day-button__day",e.WEATHER_ICON_CSS_CLASS="weather-icon",e.TEMPERATURE_CSS_CLASS="day-button__temperature",e.NIGHT_TEMPERATURE_CSS_CLASS="day-button__night-temperature",e}(),R=function(){function t(t,e){this.loadingIcon=t,this.contentContainer=e}return t.prototype.showLoadingIcon=function(){this.loadingIcon.style.removeProperty("display"),this.contentContainer.style.display="none"},t.prototype.showContent=function(){this.loadingIcon.style.display="none",this.contentContainer.style.removeProperty("display")},t}();var M;!function(t){t[t.NONE=0]="NONE",t[t.TEMPERATURE=1]="TEMPERATURE",t[t.FEELS_LIKE=2]="FEELS_LIKE",t[t.PROBABILITY_OF_PERCEPTION=3]="PROBABILITY_OF_PERCEPTION",t[t.HUMIDITY=4]="HUMIDITY",t[t.WIND_SPEED=5]="WIND_SPEED"}(M||(M={}));const k=function(){function t(t,e,n){var r=this;this.currentDisplayState=M.NONE,this.currentWeatherData=null,this.currentPreviousGraphLastValue=null,this.currentNextGraphFirstValue=null,this.canvas=t,this.timelineElement=e,this.languageManager=n;var a=t.getContext("2d",{alpha:!1});if(null===a)throw new Error("Canvas 2D context is not supported.");this.canvasCtx=a,t.width=t.offsetWidth,t.height=t.offsetHeight,this.canvasCtx.font="12px Ubuntu",this.canvasCtx.textAlign="center",this.displayNone(),new ResizeObserver((function(){return r.onCanvasResize()})).observe(t),n.addOnLanguageChangeListener((function(){return r.onLanguageChange()}))}return t.prototype.displayNone=function(){this.updateCurrentState(M.NONE,null,null,null),this.drawGraphBackground()},t.prototype.displayTemperature=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.updateCurrentState(M.TEMPERATURE,t,e,n);for(var r=[],a=0,o=t;a<o.length;a++){var i=o[a];r.push(Math.round(i.temperature))}this.updateTimeline(t),this.drawGraph(r,null!==e?Math.round(e):null,null!==n?Math.round(n):null,"°C",{line:"#FABB33",lineBackground:"#FEF1D6",point:"#FABB33",text:"#856215"})},t.prototype.displayFeelsLike=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.updateCurrentState(M.FEELS_LIKE,t,e,n);for(var r=[],a=0,o=t;a<o.length;a++){var i=o[a];r.push(Math.round(i.feelsLike))}this.updateTimeline(t),this.drawGraph(r,null!==e?Math.round(e):null,null!==n?Math.round(n):null,"°C",{line:"#FABB33",lineBackground:"#FEF1D6",point:"#FABB33",text:"#856215"})},t.prototype.displayProbabilityOfPerception=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.updateCurrentState(M.PROBABILITY_OF_PERCEPTION,t,e,n);for(var r=[],a=0,o=t;a<o.length;a++){var i=o[a];r.push(Math.round(100*i.probabilityOfPrecipitation))}this.updateTimeline(t),this.drawGraph(r,null!==e?Math.round(e):null,null!==n?Math.round(n):null,"%",{line:"#33A0FA",lineBackground:null,point:"#33A0FA",text:"#155385"})},t.prototype.displayHumidity=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.updateCurrentState(M.HUMIDITY,t,e,n);for(var r=[],a=0,o=t;a<o.length;a++){var i=o[a];r.push(Math.round(i.humidity))}this.updateTimeline(t),this.drawGraph(r,null!==e?Math.round(e):null,null!==n?Math.round(n):null,"%",{line:"#33A0FA",lineBackground:"#D6ECFE",point:"#33A0FA",text:"#155385"})},t.prototype.displayWindSpeed=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.updateCurrentState(M.WIND_SPEED,t,e,n);for(var r=[],a=0,o=t;a<o.length;a++){var i=o[a];r.push(i.windSpeed)}this.updateTimeline(t),this.drawGraph(r,null!==e?Math.round(e):null,null!==n?Math.round(n):null," km/h",{line:"#5CB3FB",lineBackground:"#EBF5FE",point:"#5CB3FB",text:"#155385"})},t.prototype.drawGraph=function(t,e,n,r,a){var o=this.canvas.width/(t.length+1),i=this.getMaxValue(t,e,n),u=this.getMinValue(t,e,n);this.drawGraphBackground(),null!==a.lineBackground&&this.drawGraphLineBackground(t,e,n,o,u,i,a.lineBackground),this.drawGraphLine(t,e,n,o,u,i,a.line),this.drawGraphPoints(t,o,u,i,a.point,a.text,r)},t.prototype.drawGraphBackground=function(){this.canvasCtx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvasCtx.fillStyle="#F2F2F3",this.canvasCtx.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.drawGraphLine=function(e,n,r,a,o,i,u){this.canvasCtx.strokeStyle=u,this.canvasCtx.lineWidth=2;var s=!1;if(this.canvasCtx.beginPath(),null!==n){var c=this.getScaledValue(n,o,i);this.canvasCtx.moveTo(0,t.GRAPH_VERTICAL_PADDING+(1-c)*(this.canvas.height-2*t.GRAPH_VERTICAL_PADDING)),s=!0}for(var l=0;l<e.length;l++){var h=e[l],d=(l+1)*a,p=(c=this.getScaledValue(h,o,i),t.GRAPH_VERTICAL_PADDING+(1-c)*(this.canvas.height-2*t.GRAPH_VERTICAL_PADDING));s?this.canvasCtx.lineTo(d,p):(s=!0,this.canvasCtx.moveTo(d,p))}null!==r&&(c=this.getScaledValue(r,o,i),this.canvasCtx.lineTo(this.canvas.width,t.GRAPH_VERTICAL_PADDING+(1-c)*(this.canvas.height-2*t.GRAPH_VERTICAL_PADDING))),this.canvasCtx.stroke()},t.prototype.drawGraphLineBackground=function(e,n,r,a,o,i,u){this.canvasCtx.fillStyle=u;var s=!1;if(this.canvasCtx.beginPath(),null!==n){var c=this.getScaledValue(n,o,i);this.canvasCtx.moveTo(0,t.GRAPH_VERTICAL_PADDING+(1-c)*(this.canvas.height-2*t.GRAPH_VERTICAL_PADDING)),s=!0}for(var l=0;l<e.length;l++){var h=e[l],d=(l+1)*a,p=(c=this.getScaledValue(h,o,i),t.GRAPH_VERTICAL_PADDING+(1-c)*(this.canvas.height-2*t.GRAPH_VERTICAL_PADDING));s?this.canvasCtx.lineTo(d,p):(s=!0,this.canvasCtx.moveTo(d,p))}null!==r?(c=this.getScaledValue(r,o,i),this.canvasCtx.lineTo(this.canvas.width,t.GRAPH_VERTICAL_PADDING+(1-c)*(this.canvas.height-2*t.GRAPH_VERTICAL_PADDING)),this.canvasCtx.lineTo(this.canvas.width,this.canvas.height)):this.canvasCtx.lineTo(e.length*a,this.canvas.height),null!==n?this.canvasCtx.lineTo(0,this.canvas.height):this.canvasCtx.lineTo(a,this.canvas.height),this.canvasCtx.closePath(),this.canvasCtx.fill()},t.prototype.drawGraphPoints=function(e,n,r,a,o,i,u){void 0===u&&(u=null);for(var s=0;s<e.length;s++){var c=e[s],l=(s+1)*n,h=this.getScaledValue(c,r,a),d=t.GRAPH_VERTICAL_PADDING+(1-h)*(this.canvas.height-2*t.GRAPH_VERTICAL_PADDING);this.canvasCtx.fillStyle=o,this.canvasCtx.beginPath(),this.canvasCtx.arc(l,d,t.GRAPH_POINT_RADIUS,0,t.GRAPH_POINT_RADIUS/2*Math.PI),this.canvasCtx.fill(),this.canvasCtx.fillStyle=i,this.canvasCtx.fillText("".concat(c).concat(u||""),l,d-t.GRAPH_TEXT_POINT_OFFSET)}},t.prototype.updateTimeline=function(e){for(var n=[],r=0,a=e;r<a.length;r++){var o=a[r],i=B.unixTimeToDate(o.time).toLocaleTimeString(A.getLocale(this.languageManager.getCurrentLanguage()),{hour:"2-digit",minute:"2-digit",hour12:!1});n.push(i)}this.timelineElement.innerHTML="";for(var u=100/(n.length+1),s=0;s<n.length;s++){var c=document.createElement("div");c.classList.add(t.TIMELINE_POINT_CSS_CLASS),c.innerText=n[s],c.style.left="".concat(u*(s+1),"%"),this.timelineElement.appendChild(c)}},t.prototype.getScaledValue=function(t,e,n){return n-e==0?0:(t-e)/(n-e)},t.prototype.getMaxValue=function(t,e,n){var r=t.slice();return null!==e&&r.push(e),null!==n&&r.push(n),Math.max.apply(Math,r)},t.prototype.getMinValue=function(t,e,n){var r=t.slice();return null!==e&&r.push(e),null!==n&&r.push(n),Math.min.apply(Math,r)},t.prototype.updateCurrentState=function(t,e,n,r){this.currentDisplayState=t,this.currentWeatherData=e,this.currentPreviousGraphLastValue=n,this.currentNextGraphFirstValue=r},t.prototype.onLanguageChange=function(){this.rerender()},t.prototype.onCanvasResize=function(){this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.canvasCtx.font="12px Ubuntu",this.canvasCtx.textAlign="center",this.canvasCtx.textBaseline="bottom",this.rerender()},t.prototype.rerender=function(){if(null!==this.currentWeatherData)switch(this.currentDisplayState){case M.TEMPERATURE:this.displayTemperature(this.currentWeatherData,this.currentPreviousGraphLastValue,this.currentNextGraphFirstValue);break;case M.FEELS_LIKE:this.displayFeelsLike(this.currentWeatherData,this.currentPreviousGraphLastValue,this.currentNextGraphFirstValue);break;case M.PROBABILITY_OF_PERCEPTION:this.displayProbabilityOfPerception(this.currentWeatherData,this.currentPreviousGraphLastValue,this.currentNextGraphFirstValue);break;case M.HUMIDITY:this.displayHumidity(this.currentWeatherData,this.currentPreviousGraphLastValue,this.currentNextGraphFirstValue);break;case M.WIND_SPEED:this.displayWindSpeed(this.currentWeatherData,this.currentPreviousGraphLastValue,this.currentNextGraphFirstValue)}else this.displayNone()},t.TIMELINE_POINT_CSS_CLASS="graph__timeline-point",t.GRAPH_VERTICAL_PADDING=32,t.GRAPH_POINT_RADIUS=3,t.GRAPH_TEXT_POINT_OFFSET=7,t}();var x;!function(t){t[t.TEMPERATURE=0]="TEMPERATURE",t[t.FEELS_LIKE=1]="FEELS_LIKE",t[t.PRECIPITATION=2]="PRECIPITATION",t[t.HUMIDITY=3]="HUMIDITY",t[t.WIND=4]="WIND"}(x||(x={}));const W=function(){function e(n,r){var a=this;this.buttons=new Map,this.onActiveItemChangeEventSource=new t,this.buttons.set(x.TEMPERATURE,r.temperatureButton),this.buttons.set(x.FEELS_LIKE,r.feelsLikeButton),this.buttons.set(x.PRECIPITATION,r.precipitationButton),this.buttons.set(x.HUMIDITY,r.humidityButton),this.buttons.set(x.WIND,r.windButton),this.activeItem=x.TEMPERATURE,r.temperatureButton.classList.add(e.BUTTON_ACTIVE_CSS_MODIFIER_CLASS),r.temperatureButton.addEventListener("click",(function(){return a.onButtonClick(x.TEMPERATURE)})),r.feelsLikeButton.addEventListener("click",(function(){return a.onButtonClick(x.FEELS_LIKE)})),r.precipitationButton.addEventListener("click",(function(){return a.onButtonClick(x.PRECIPITATION)})),r.humidityButton.addEventListener("click",(function(){return a.onButtonClick(x.HUMIDITY)})),r.windButton.addEventListener("click",(function(){return a.onButtonClick(x.WIND)})),n.addOnLanguageChangeListener((function(t){return a.onLanguageChange(t)}))}return e.prototype.getActiveItem=function(){return this.activeItem},e.prototype.addOnActiveItemChangeListener=function(t){this.onActiveItemChangeEventSource.subscribe(t)},e.prototype.onButtonClick=function(t){if(this.activeItem!==t){var n=this.buttons.get(this.activeItem);n&&n.classList.remove(e.BUTTON_ACTIVE_CSS_MODIFIER_CLASS),this.activeItem=t;var r=this.buttons.get(t);r&&(r.classList.add(e.BUTTON_ACTIVE_CSS_MODIFIER_CLASS),this.onActiveItemChangeEventSource.fire(this.activeItem))}},e.prototype.onLanguageChange=function(t){var e=this.buttons.get(x.TEMPERATURE),n=this.buttons.get(x.FEELS_LIKE),r=this.buttons.get(x.PRECIPITATION),a=this.buttons.get(x.HUMIDITY),o=this.buttons.get(x.WIND);e&&(e.innerText=t.localizedData.temperature),n&&(n.innerText=t.localizedData.feelsLike),r&&(r.innerText=t.localizedData.precipitation),a&&(a.innerText=t.localizedData.humidity),o&&(o.innerText=t.localizedData.wind)},e.BUTTON_ACTIVE_CSS_MODIFIER_CLASS="navigation__button--active",e}(),F=function(){function t(t,e,n){var r=this;this.dayButtons=[],this.currentlyActiveDayButton=null,this.dayWeatherData=[],this.toggle=new R(n.loadingIcon,n.contentContainer),this.daysNavigation=n.daysNavigation,this.forecastGraphNavigation=new W(e,{temperatureButton:n.temperatureButton,feelsLikeButton:n.feelsLikeButton,precipitationButton:n.precipitationButton,humidityButton:n.humidityButton,windButton:n.windButton}),this.forecastGraph=new k(n.graphCanvas,n.graphTimelineElement,e),this.weatherApp=t,this.languageManager=e,this.forecastGraphNavigation.addOnActiveItemChangeListener((function(){return r.onGraphNavigationActiveItemChange()})),t.addOnForecastWeatherLoadingStartedListener((function(){return r.onForecastLoadingStarted()})),t.addOnForecastWeatherLoadedListener((function(t){return r.onForecastLoaded(t)})),e.addOnLanguageChangeListener((function(t){return r.onLanguageChange(t)}))}return t.prototype.onForecastLoadingStarted=function(){this.toggle.showLoadingIcon()},t.prototype.onForecastLoaded=function(t){var e=this;this.toggle.showContent();var n=B.groupWeatherDataByDay(t).sort((function(t,e){return t.date.getTime()-e.date.getTime()}));this.dayWeatherData=n,this.dayButtons.splice(0),this.currentlyActiveDayButton=null,this.daysNavigation.innerHTML="";for(var r=0,a=n;r<a.length;r++){var o=a[r],i=new N(o,this.daysNavigation,this.weatherApp,A.getLocale(this.languageManager.getCurrentLanguage()));i.addOnClickListener((function(t){return e.onDayButtonClick(t)})),this.dayButtons.push(i)}if(this.dayButtons.length>0){var u=this.dayButtons[0];u.setAsActive(),this.currentlyActiveDayButton=u,this.updateGraph(u.getDayWeatherData())}},t.prototype.onGraphNavigationActiveItemChange=function(){null!==this.currentlyActiveDayButton&&this.updateGraph(this.currentlyActiveDayButton.getDayWeatherData())},t.prototype.onDayButtonClick=function(t){this.currentlyActiveDayButton!==t&&(null!==this.currentlyActiveDayButton&&this.currentlyActiveDayButton.setAsInactive(),t.setAsActive(),this.currentlyActiveDayButton=t,this.updateGraph(t.getDayWeatherData()))},t.prototype.updateGraph=function(t){for(var e=null,n=null,r=0;r<this.dayWeatherData.length;r++)this.dayWeatherData[r]===t&&(r>0&&(e=this.dayWeatherData[r-1].data),r<this.dayWeatherData.length-1&&(n=this.dayWeatherData[r+1].data));switch(this.forecastGraphNavigation.getActiveItem()){case x.TEMPERATURE:var a=null!==e&&e.length>0?e[e.length-1].temperature:null,o=null!==n&&n.length>0?n[0].temperature:null;this.forecastGraph.displayTemperature(t.data,a,o);break;case x.FEELS_LIKE:var i=null!==e&&e.length>0?e[e.length-1].feelsLike:null,u=null!==n&&n.length>0?n[0].feelsLike:null;this.forecastGraph.displayFeelsLike(t.data,i,u);break;case x.PRECIPITATION:var s=null!==e&&e.length>0?e[e.length-1].probabilityOfPrecipitation:null,c=null!==n&&n.length>0?n[0].probabilityOfPrecipitation:null;this.forecastGraph.displayProbabilityOfPerception(t.data,s,c);break;case x.HUMIDITY:var l=null!==e&&e.length>0?e[e.length-1].humidity:null,h=null!==n&&n.length>0?n[0].humidity:null;this.forecastGraph.displayHumidity(t.data,l,h);break;case x.WIND:var d=null!==e&&e.length>0?e[e.length-1].windSpeed:null,p=null!==n&&n.length>0?n[0].windSpeed:null;this.forecastGraph.displayWindSpeed(t.data,d,p);break;default:this.forecastGraph.displayNone()}},t.prototype.onLanguageChange=function(t){for(var e=A.getLocale(t.language),n=0,r=this.dayButtons;n<r.length;n++)r[n].updateDayName(e)},t}(),G=function(){function t(t){var e=this;this.opened=!1,this.targetElement=t.targetElement,this.openedCSSClass=t.openedCSSClass,this.buttonElement=t.buttonElement||null,this.buttonOpenedCSSClass=t.buttonOpenedCSSClass||null;var n=t.closeOnClickOutside||!1;if(this.buttonElement){this.buttonElement.addEventListener("click",(function(){return e.onButtonClick()}));for(var r=0;r<this.buttonElement.children.length;r++){var a=this.buttonElement.children[r];a instanceof HTMLElement&&(a.style.pointerEvents="none")}}n&&document.addEventListener("click",(function(t){return e.onPageClick(t)})),this.targetElement.querySelectorAll("button,a").forEach((function(t){t.setAttribute("tabindex","-1")}))}return t.prototype.isOpened=function(){return this.opened},t.prototype.open=function(){this.opened||(this.targetElement.classList.add(this.openedCSSClass),this.buttonElement&&this.buttonOpenedCSSClass&&this.buttonElement.classList.add(this.buttonOpenedCSSClass),this.targetElement.querySelectorAll("button,a").forEach((function(t){t.setAttribute("tabindex","0")})),this.opened=!0)},t.prototype.close=function(){this.opened&&(this.targetElement.classList.remove(this.openedCSSClass),this.buttonElement&&this.buttonOpenedCSSClass&&this.buttonElement.classList.remove(this.buttonOpenedCSSClass),this.targetElement.querySelectorAll("button,a").forEach((function(t){t.setAttribute("tabindex","-1")})),this.opened=!1)},t.prototype.onButtonClick=function(){this.opened?this.close():this.open()},t.prototype.onPageClick=function(t){t.target!==this.buttonElement&&this.close()},t}(),H=function(){function t(e,n){var r=this;this.languageManager=e,this.selectButtonFlagImage=n.selectButtonFlagImage,this.selectButtonText=n.selectButtonText,this.updateSelectButton(this.languageManager.getCurrentLanguage()),new G({targetElement:n.selectItemsContainer,openedCSSClass:t.SELECT_ITEMS_CONTAINER_OPENED_CSS_MODIFIER_CLASS,buttonElement:n.selectButton,buttonOpenedCSSClass:t.SELECT_BUTTON_OPENED_CSS_MODIFIER_CLASS,closeOnClickOutside:!0});var a=n.englishButton,o=n.czechButton,i=n.slovakButton,u=n.germanButton;a.addEventListener("click",(function(){return r.onLanguageButtonClick(C.ENGLISH)})),o.addEventListener("click",(function(){return r.onLanguageButtonClick(C.CZECH)})),i.addEventListener("click",(function(){return r.onLanguageButtonClick(C.SLOVAK)})),u.addEventListener("click",(function(){return r.onLanguageButtonClick(C.GERMAN)})),this.languageManager.addOnLanguageChangeListener((function(t){return r.onLanguageChanged(t)}))}return t.prototype.onLanguageButtonClick=function(t){this.languageManager.changeLanguage(t),this.updateSelectButton(t)},t.prototype.onLanguageChanged=function(t){this.updateSelectButton(t.language)},t.prototype.updateSelectButton=function(t){this.selectButtonFlagImage.src=this.getFlagImageURLByLanguage(t),this.selectButtonText.innerText=this.getButtonTextByLanguage(t)},t.prototype.getFlagImageURLByLanguage=function(t){switch(t){case C.ENGLISH:return"./static/img/flags/united-states.svg";case C.CZECH:return"./static/img/flags/czechia.svg";case C.SLOVAK:return"./static/img/flags/slovakia.svg";case C.GERMAN:return"./static/img/flags/germany.svg"}},t.prototype.getButtonTextByLanguage=function(t){switch(t){case C.ENGLISH:return"English";case C.CZECH:return"Česky";case C.SLOVAK:return"Slovensky";case C.GERMAN:return"Deutsch"}},t.SELECT_ITEMS_CONTAINER_OPENED_CSS_MODIFIER_CLASS="language-select__items--opened",t.SELECT_BUTTON_OPENED_CSS_MODIFIER_CLASS="language-select__button--opened",t}(),V=function(){function t(t,e){var n=this;this.currentWeatherHeading=e.currentWeatherHeading,this.forecastHeading=e.forecastHeading,this.currentWeatherFeelsLikeLabel=e.currentWeatherFeelsLikeLabel,this.currentWeatherHumidityLabel=e.currentWeatherHumidityLabel,this.currentWeatherWindLabel=e.currentWeatherWindLabel,this.errorPageMessage=e.errorPageMessage,t.addOnLanguageChangeListener((function(t){return n.onLanguageChange(t)}))}return t.prototype.onLanguageChange=function(t){var e=t.localizedData;this.currentWeatherHeading.innerText=e.currentWeather,this.forecastHeading.innerText=e.forecast,this.currentWeatherFeelsLikeLabel.innerText=e.feelsLike,this.currentWeatherHumidityLabel.innerText=e.humidity,this.currentWeatherWindLabel.innerText=e.wind,this.errorPageMessage.innerText=e.generalError},t}(),U=function(){function t(t,e,n){var r=this;this.locationNameElement=t,this.weatherApp=e,this.languageManager=n,this.updateLocationName(),e.addOnLocationChangeListener((function(){return r.updateLocationName()})),n.addOnLanguageChangeListener((function(){return r.updateLocationName()}))}return t.prototype.updateLocationName=function(){var t=A.getLocale(this.languageManager.getCurrentLanguage());this.locationNameElement.innerText=this.weatherApp.getCurrentLocationName(t)},t}(),j=function(){function t(e,n,r){var a=this;this.currentlyDisplayedElement=null,this.container=e,this.loadingIcon=document.createElement("div"),this.noResultsMessage=document.createElement("p"),this.errorMessage=document.createElement("p"),this.itemsContainer=n,this.loadingIcon.classList.add(t.LOADING_ICON_CSS_CLASS),this.noResultsMessage.classList.add(t.MESSAGE_CSS_CLASS),this.errorMessage.classList.add(t.MESSAGE_CSS_CLASS),this.errorMessage.classList.add(t.ERROR_MESSAGE_CSS_MODIFIER_CLASS),this.loadingIcon.innerHTML=P.create("./static/icon-sprite.svg","progress"),r.addOnLanguageChangeListener((function(t){return a.onLanguageChange(t)}))}return t.prototype.showLoadingIcon=function(){this.currentlyDisplayedElement&&this.currentlyDisplayedElement.remove(),this.container.appendChild(this.loadingIcon),this.currentlyDisplayedElement=this.loadingIcon},t.prototype.showNoResultsMessage=function(){this.currentlyDisplayedElement&&this.currentlyDisplayedElement.remove(),this.container.appendChild(this.noResultsMessage),this.currentlyDisplayedElement=this.noResultsMessage},t.prototype.showErrorMessage=function(){this.currentlyDisplayedElement&&this.currentlyDisplayedElement.remove(),this.container.appendChild(this.errorMessage),this.currentlyDisplayedElement=this.errorMessage},t.prototype.showItems=function(){this.currentlyDisplayedElement&&this.currentlyDisplayedElement.remove(),this.container.appendChild(this.itemsContainer),this.currentlyDisplayedElement=this.itemsContainer},t.prototype.onLanguageChange=function(t){this.noResultsMessage.innerText=t.localizedData.noResultsForLocationSearch,this.errorMessage.innerText=t.localizedData.locationSearchError},t.LOADING_ICON_CSS_CLASS="search-bar__loading-icon",t.MESSAGE_CSS_CLASS="search-bar__message",t.ERROR_MESSAGE_CSS_MODIFIER_CLASS="search-bar__message--error",t}(),Y=function(){function t(e,n,r,a){var o=this;this.searchTimoutId=null,this.input=e,this.itemsContainer=document.createElement("div"),this.resultsContainerToggle=new G({targetElement:n,openedCSSClass:t.RESULTS_CONTAINER_CSS_OPENED_MODIFIER}),this.resultsContentToggle=new j(n,this.itemsContainer,a),this.weatherApp=r,this.languageManager=a,this.input.addEventListener("input",(function(){return o.onInputChange()})),this.input.addEventListener("focus",(function(){return o.onInputFocus()})),document.addEventListener("click",(function(t){return o.onPageClick(t)})),r.addOnLocationSearchLoadingStartedListener((function(){return o.onSearchLoadingStarted()})),r.addOnLocationSearchLoadedListener((function(t){return o.onSearchResultsLoaded(t)})),r.addOnLocationSearchLoadingErrorListener((function(){return o.onSearchLoadingError()})),a.addOnLanguageChangeListener((function(t){return o.onLanguageChange(t)}))}return t.prototype.onSearchLoadingStarted=function(){this.resultsContentToggle.showLoadingIcon()},t.prototype.onSearchResultsLoaded=function(e){var n=this;e.length>0?this.resultsContentToggle.showItems():this.resultsContentToggle.showNoResultsMessage(),this.itemsContainer.innerHTML="";for(var r=function(e){var r=document.createElement("button");r.classList.add(t.LOCATION_BUTTON_CSS_CLASS),r.innerText=a.getLocationName(e),r.addEventListener("click",(function(){return n.onLocationButtonClick(e)})),a.resultsContainerToggle.isOpened()||r.setAttribute("tabindex","-1"),a.itemsContainer.appendChild(r)},a=this,o=0,i=e;o<i.length;o++)r(i[o])},t.prototype.getLocationName=function(t){var e=A.getLocale(this.languageManager.getCurrentLanguage());return t.localNames.get(e)||t.name},t.prototype.onSearchLoadingError=function(){this.resultsContentToggle.showErrorMessage()},t.prototype.onInputChange=function(){var e=this,n=this.input.value.trim();null!==this.searchTimoutId&&window.clearTimeout(this.searchTimoutId),n.length>0?(this.resultsContainerToggle.open(),this.searchTimoutId=window.setTimeout((function(){e.weatherApp.searchForLocation(n)}),t.SEARCH_DELAY)):this.resultsContainerToggle.close()},t.prototype.onInputFocus=function(){this.input.value.trim().length>0&&this.resultsContainerToggle.open()},t.prototype.onPageClick=function(t){t.target!==this.input&&this.resultsContainerToggle.close()},t.prototype.onLocationButtonClick=function(t){this.weatherApp.setLocation(t),this.weatherApp.loadCurrentWeather(),this.weatherApp.loadForecastWeather(),this.input.value="",this.resultsContainerToggle.close()},t.prototype.onLanguageChange=function(t){this.input.setAttribute("placeholder",t.localizedData.searchForLocation);var e=this.input.value.trim();e.length>0&&this.weatherApp.searchForLocation(e)},t.RESULTS_CONTAINER_CSS_OPENED_MODIFIER="search-bar__results--opened",t.LOCATION_BUTTON_CSS_CLASS="search-bar__item",t.SEARCH_DELAY=300,t}(),z=function(){function t(t,e,n){this.loadingPage=t,this.weatherAppPage=e,this.errorPage=n}return t.prototype.showLoadingPage=function(){this.loadingPage.style.removeProperty("display"),this.weatherAppPage.style.display="none",this.errorPage.style.display="none"},t.prototype.showWeatherAppPage=function(){this.loadingPage.style.display="none",this.weatherAppPage.style.removeProperty("display"),this.errorPage.style.display="none"},t.prototype.showErrorPage=function(){this.loadingPage.style.display="none",this.weatherAppPage.style.display="none",this.errorPage.style.removeProperty("display")},t}(),K=function(){function t(t){var e=this;this.languageLoaded=!1,this.pagesToggle=new z(this.getElementById(t.loadingPageId),this.getElementById(t.weatherAppPageId),this.getElementById(t.errorPageId)),new U(this.getElementById(t.currentLocationNameId),t.weatherApp,t.languageManager);var n=this.getElementById(t.languageSelectButtonFlagImageId);if(!(n instanceof HTMLImageElement))throw new Error("Element with id ".concat(t.languageSelectButtonFlagImageId," is not image element."));new H(t.languageManager,{selectButton:this.getElementById(t.languageSelectButtonId),selectButtonFlagImage:n,selectButtonText:this.getElementById(t.languageSelectButtonTextId),selectItemsContainer:this.getElementById(t.languageSelectItemsContainerId),englishButton:this.getElementById(t.languageSelectEnglishButtonId),czechButton:this.getElementById(t.languageSelectCzechButtonId),slovakButton:this.getElementById(t.languageSelectSlovakButtonId),germanButton:this.getElementById(t.languageSelectGermanButtonId)});var r=this.getElementById(t.locationSearchBarInputId);if(!(r instanceof HTMLInputElement))throw new Error("Element with id ".concat(t.locationSearchBarInputId," is not input element."));new Y(r,this.getElementById(t.locationSearchBarResultsContainerId),t.weatherApp,t.languageManager);var a=this.getElementById(t.currentWeatherImageId);if(!(a instanceof HTMLImageElement))throw new Error("Element with id ".concat(t.currentWeatherImageId," is not image element."));new D(t.weatherApp,{loadingIcon:this.getElementById(t.currentWeatherLoadingIconId),contentContainer:this.getElementById(t.currentWeatherContentContainerId),image:a,temperatureValue:this.getElementById(t.currentWeatherTemperatureValueElementId),weatherDescription:this.getElementById(t.currentWeatherDescriptionId),feelsLikeValue:this.getElementById(t.currentWeatherFeelsLikeValueElementId),humidityValue:this.getElementById(t.currentWeatherHumidityValueElementId),windValue:this.getElementById(t.currentWeatherWindValueElementId)});var o=this.getElementById(t.graphCanvasId);if(!(o instanceof HTMLCanvasElement))throw new Error("Element with id ".concat(t.graphCanvasId," is not canvas element."));new F(t.weatherApp,t.languageManager,{loadingIcon:this.getElementById(t.forecastLoadingIconId),contentContainer:this.getElementById(t.forecastContentContainerId),temperatureButton:this.getElementById(t.forecastTemperatureButtonId),feelsLikeButton:this.getElementById(t.forecastFeelsLikeButtonId),precipitationButton:this.getElementById(t.forecastPrecipitationButtonId),humidityButton:this.getElementById(t.forecastHumidityButtonId),windButton:this.getElementById(t.forecastWindButtonId),daysNavigation:this.getElementById(t.daysNavigationId),graphCanvas:o,graphTimelineElement:this.getElementById(t.graphTimelineElementId)}),new V(t.languageManager,{currentWeatherHeading:this.getElementById(t.currentWeatherHeadingId),forecastHeading:this.getElementById(t.forecastHeadingId),currentWeatherFeelsLikeLabel:this.getElementById(t.currentWeatherFeelsLikeLabelId),currentWeatherHumidityLabel:this.getElementById(t.currentWeatherHumidityLabelId),currentWeatherWindLabel:this.getElementById(t.currentWeatherWindLabelId),errorPageMessage:this.getElementById(t.errorPageMessageId)}),t.languageManager.addOnLanguageChangeListener((function(){return e.onLanguageChange()})),t.weatherApp.addOnCurrentWeatherLoadingErrorListener((function(){return e.onDataLoadingError()})),t.weatherApp.addOnForecastWeatherLoadingErrorListener((function(){return e.onDataLoadingError()})),t.weatherApp.addOnLocationSearchLoadingErrorListener((function(){return e.onDataLoadingError()}))}return t.prototype.onDataLoadingError=function(){this.pagesToggle.showErrorPage()},t.prototype.onLanguageChange=function(){this.languageLoaded||(this.pagesToggle.showWeatherAppPage(),this.languageLoaded=!0)},t.prototype.getElementById=function(t){var e=document.getElementById(t);if(!(e instanceof HTMLElement))throw new Error("Element with id ".concat(t," does not exist."));return e},t}();new(function(){function t(){var e=this,n=this.getDefaultLanguage(),r=this.getCoordinatesFromLocalStorage();null===r&&(r=this.getDefaultCoordinatesByLanguage(n));var a=new E(t.OPEN_WEATHER_MAP_APP_ID),o=new m(t.OPEN_WEATHER_MAP_APP_ID);this.weatherApp=new p(a,o,r[0],r[1],A.getLocale(n,!0));var i=new b;this.languageManager=new _(i),new K({weatherApp:this.weatherApp,languageManager:this.languageManager,loadingPageId:"LoadingPage",errorPageId:"ErrorPage",errorPageMessageId:"ErrorPageMessage",weatherAppPageId:"WeatherAppPage",languageSelectButtonId:"LanguageSelectButton",languageSelectButtonFlagImageId:"LanguageSelectButtonFlagImage",languageSelectButtonTextId:"LanguageSelectButtonText",languageSelectItemsContainerId:"LanguageSelectItems",languageSelectEnglishButtonId:"LanguageSelectEnglishButton",languageSelectCzechButtonId:"LanguageSelectCzechButton",languageSelectSlovakButtonId:"LanguageSelectSlovakButton",languageSelectGermanButtonId:"LanguageSelectGermanButton",locationSearchBarInputId:"LocationSearchBarInput",locationSearchBarResultsContainerId:"LocationSearchBarResults",currentWeatherHeadingId:"CurrentWeatherHeading",forecastHeadingId:"ForecastHeading",currentWeatherFeelsLikeLabelId:"CurrentWeatherFeelsLikeLabel",currentWeatherHumidityLabelId:"CurrentWeatherHumidityLabel",currentWeatherWindLabelId:"CurrentWeatherWindLabel",currentLocationNameId:"CurrentLocationName",currentWeatherLoadingIconId:"CurrentWeatherLoadingIcon",currentWeatherContentContainerId:"CurrentWeatherContentContainer",currentWeatherTemperatureValueElementId:"CurrentWeatherTemperature",currentWeatherImageId:"CurrentWeatherImage",currentWeatherDescriptionId:"CurrentWeatherDescription",currentWeatherFeelsLikeValueElementId:"CurrentWeatherFeelsLike",currentWeatherHumidityValueElementId:"CurrentWeatherHumidity",currentWeatherWindValueElementId:"CurrentWeatherWind",forecastLoadingIconId:"ForecastLoadingIcon",forecastContentContainerId:"ForecastContentContainer",forecastTemperatureButtonId:"ForecastTemperatureButton",forecastFeelsLikeButtonId:"ForecastFeelsLikeButton",forecastPrecipitationButtonId:"ForecastPrecipitationButton",forecastHumidityButtonId:"ForecastHumidityButton",forecastWindButtonId:"ForecastWindButton",daysNavigationId:"ForecastDaysNavigation",graphCanvasId:"GraphCanvas",graphTimelineElementId:"GraphCanvasTimeline"}),this.languageManager.addOnLanguageChangeListener((function(t){return e.onLanguageChange(t)})),this.languageManager.changeLanguage(n),this.weatherApp.loadCurrentWeather(),this.weatherApp.loadForecastWeather(),this.weatherApp.addOnLocationChangeListener((function(){return e.onLocationChange()}))}return t.prototype.onLocationChange=function(){var e=this.weatherApp.getCurrentLocationCoordinates();null!==e&&localStorage.setItem(t.LOCAL_STORAGE_COORDINATES_FIELD,JSON.stringify(e))},t.prototype.onLanguageChange=function(t){var e=A.getLocale(t.language,!0);this.weatherApp.setLanguage(e),this.weatherApp.loadCurrentWeather(),this.weatherApp.loadForecastWeather()},t.prototype.getCoordinatesFromLocalStorage=function(){var e=localStorage.getItem(t.LOCAL_STORAGE_COORDINATES_FIELD);if(null===e)return null;try{var n=JSON.parse(e);return n instanceof Array?"number"!=typeof n[0]||"number"!=typeof n[1]?null:[n[0],n[1]]:null}catch(t){return null}},t.prototype.getDefaultCoordinatesByLanguage=function(t){switch(t){case C.ENGLISH:return[51.5073219,-.1276474];case C.CZECH:return[50.0596288,14.446459273258009];case C.SLOVAK:return[48.1435149,17.108279];case C.GERMAN:return[52.5170365,13.3888599]}},t.prototype.getDefaultLanguage=function(){switch(navigator.language.split("-")[0]){case"cs":return C.CZECH;case"sk":return C.SLOVAK;case"de":return C.GERMAN;default:return C.ENGLISH}},t.OPEN_WEATHER_MAP_APP_ID="610f182df978d44c879ed39ce0f7f9a9",t.LOCAL_STORAGE_COORDINATES_FIELD="WEATHER_WEB_APP_COORDINATES",t}())})();